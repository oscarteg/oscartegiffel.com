---
import { default as dayjs } from "dayjs";
import BaseHead from "../components/BaseHead.astro";
import Container from "../components/Container.astro";
import AdvancedFormat from "dayjs/plugin/advancedFormat";

dayjs.extend(AdvancedFormat);

type FrontMatter = {
  title: string;
  summary: string;
  publishedAt: Date;
  updatedAt: Date;
  image?: string;
};

export type Props = {
  id: string;
  frontMatter: FrontMatter;
};

const { frontMatter } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead title={frontMatter.title} description={frontMatter.summary} />
  </head>

  <body class="text-white bg-white dark:bg-black dark:text-black transition duration-500 ease-in-out">
    <Container>
      <article class="flex flex-col items-start justify-center w-full max-w-2xl mx-auto mb-16">
        <h1 class="mb-4 text-3xl font-bold tracking-tight text-black md:text-5xl dark:text-white">
          {frontMatter.title}
        </h1>
        <div class="flex flex-col items-start justify-between w-full mt-2 mb-8 md:flex-row md:items-center">
          <div class="flex items-center">
            <img alt="Oscar te Giffel" src="/avatar.jpg" class="w-6 h-6 rounded-full" />
            <p class="ml-2 text-sm text-gray-700 dark:text-gray-300">
              {"Oscar te Giffel / "}
              {dayjs(frontMatter.publishedAt).format("MMMM dd, yyyy")}
            </p>
          </div>
          <p class="mt-2 text-sm text-gray-500 min-w-32 md:mt-0">
            {" â€¢ "}
            <!-- TODO: Fix relative time -->
            <!-- Last update: {dayjs().to(dayjs(frontMatter.updatedAt)} -->
          </p>
        </div>
        <div class="w-full prose dark:prose-dark max-w-none">
          <slot />
        </div>
        <div class="mt-3 text-sm text-gray-700 dark:text-gray-300"></div>
      </article>
    </Container>
  </body>
</html>
