---
import { Image } from "astro:assets";
import dayjs from "dayjs";
import type { Post } from "../models";
import DefaultLayout from "./default.astro";

type Props = {
	post: Post;
	lastModified: Date;
	headings?: { depth: number; slug: string; text: string }[];
};

const { post, headings = [] } = Astro.props;

const { title, description = "", cover, publishDate, toc = false } = post.data;
---

<DefaultLayout title={title} description={description} headings={headings} frontmatter={{ title, description, toc }}>
  {publishDate && (
    <div class="text-xs uppercase tracking-[0.2em] text-text-muted font-light mb-8">
      {dayjs(publishDate).format("MMM DD, YYYY")}
    </div>
  )}

  {cover && <Image src={cover} alt="cover" class="w-full h-48 object-cover rounded-lg mb-8" />}

  <slot />
</DefaultLayout>
